{"remainingRequest":"D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\src\\views\\Storage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\src\\views\\Storage.vue","mtime":1652692860744},{"path":"D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650607278398},{"path":"D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1650607250005},{"path":"D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650607278398},{"path":"D:\\浏览器下载\\Instant-sharing-cloud-disk-system-master\\Instant-sharing-cloud-disk-system-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1650607553931}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBidXMgZnJvbSAiLi4vdXRpbHMvYnVzIjsKaW1wb3J0IFZpZGVvIGZyb20gIi4uL3ZpZXdzL1ZpZGVvLnZ1ZSI7CmltcG9ydCBBdWRpbyBmcm9tICIuLi92aWV3cy9BdWRpby52dWUiOwppbXBvcnQgU21hbGxhdWRpbyBmcm9tICIuLi92aWV3cy9TbWFsbGF1ZGlvLnZ1ZSI7CmltcG9ydCBQaG90byBmcm9tICIuLi92aWV3cy9QaG90by52dWUiOwppbXBvcnQgewogIC8v5pS55Y+Y55So5oi35aS05YOPQVBJCiAgUG9zdENoYW5nZVVzZXJBdmF0YXIsCiAgLy/ojrflj5bmlbDmja5BUEkKICBHZXRBbGxGaWxlQVBJLAogIEdldEFsbEltZ0FQSSwKICBHZXRBbGxWaWRlb0FQSSwKICBHZXRBbGxNdXNpY0FQSSwKICBHZXRBbGxEb2N1bWVudEFQSSwKICAvL+S4iuS8oOaVsOaNrkFQSQogIFBvc3RTaW5nbGVJbWdBUEksCiAgUG9zdE11bHRpSW1nQVBJLAogIFBvc3RTaW1nbGVEb2N1bWVudEFQSSwKICBQb3N0TXVsdGlEb2N1bWVudEFQSSwKICBQb3N0U2luZ2xlTXVzaWNBUEksCiAgUG9zdE11bHRpTXVzaWNBUEksCiAgUG9zdFNpbmdsZVZpZGVvQVBJLAogIFBvc3RNdWx0aVZpZGVvQVBJLAogIFBvc3RDaGFuZ2VNZXNzYWdlQVBJLAogIFBvc3RJbml0VXNlckF2YXRhciwKfSBmcm9tICIuLi9yZXF1ZXN0L2FwaS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3RvcmFnZSIsCiAgY29tcG9uZW50czogewogICAgVmlkZW8sCiAgICBBdWRpbywKICAgIFNtYWxsYXVkaW8sCiAgICBQaG90bywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdHlsZTogewogICAgICAgIGRpc3BsYXk6ICJub25lIiwKICAgICAgfSwKICAgICAgLy/mir3lsYnpu5jorqTmmL7npLoKICAgICAgZHJhd2VyOiBmYWxzZSwKICAgICAgZGlyZWN0aW9uOiAicnRsIiwKICAgICAgLy/lpLTlg48KICAgICAgY2lyY2xlVXJsOiByZXF1aXJlKCIuLi9pbWcvaGVhZC5wbmciKSwKICAgICAgc2l6ZUxpc3Q6IFsibGFyZ2UiXSwKCiAgICAgIC8v5LiK5Lyg77yM5aW95Y+L77yM5paH5Lu25YiX6KGo5YiH5o2i5pi+56S6CiAgICAgIGlzU2hvd0ZpbGVMaXN0OiBmYWxzZSwKICAgICAgaXNTaG93TG9hZFVwOiBmYWxzZSwKICAgICAgaXNTaG93UGVhcnNvbmFsOiBmYWxzZSwKICAgICAgLy/kuIrkvKDliJfooagKICAgICAgZmlsZXNsaXN0OiBbXSwKICAgICAgLy/ov5vluqbmnaHmmL7npLoKICAgICAgcGVyY2VudGFnZTogMCwKICAgICAgY3VzdG9tQ29sb3I6ICIjNDA5ZWZmIiwKICAgICAgLy8g5Liq5Lq65L+h5oGv5pu05pS5CiAgICAgIHNyYzogIiIsCiAgICAgIG5pY2tuYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIC8v5paH5Lu25pi+56S65YiX6KGoCiAgICAgIGxpc3Q6IFtdLAogICAgICBhbGxsaXN0OiBbXSwKICAgICAgLy/ovpPlhaXmoYbphY3nva4KICAgICAgcmVzdGF1cmFudHM6IFtdLAogICAgICBzdGF0ZTogIiIsCiAgICAgIHRpbWVvdXQ6IG51bGwsCiAgICAgIC8vdG9rZW4KICAgICAgdG9rZW46ICIiLAogICAgICAvL+aWh+S7tui9rOaNouaIkGJhc2U2NAogICAgICBCYXNlNjQ6IFtdLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBidXMuJG9mZigiZXZlbnQiKTsgLy/pmLvmraLkuovku7booqvop6blj5HlpJrmrKEKICAgIGJ1cy4kb24oImV2ZW50IiwgdGhpcy5zaG93KTsgLy/nu5HlrpoKICAgIGJ1cy4kb24oImNvbnRyb2wiLCB0aGlzLmNvbnRyb2xwZXJzb25hbCk7IC8v57uR5a6aCiAgICBidXMuJG9mZigicGVhcnNvbmFsbWVzc2FnZSIpOyAvL+mYu+atouS6i+S7tuiiq+inpuWPkeWkmuasoQogICAgYnVzLiRvbigicGVhcnNvbmFsbWVzc2FnZSIsIHRoaXMucGVhcnNvbmFsbWVzc2FnZSk7IC8v57uR5a6aCiAgfSwKCiAgbWV0aG9kczogewogICAgLy/mm7TmjaLmuLLmn5PlpLTlg48KICAgIHVwZGF0ZShlKSB7CiAgICAgIGxldCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtZGF0YS5hcHBlbmQoImhlYWRlciIsIGZpbGUpOwogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpOwogICAgICBsZXQgYXZhdGFyVXJsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImF2YXRhclVybCIpOwogICAgICBpZiAoYXZhdGFyVXJsICE9IG51bGwpIHsKICAgICAgICBQb3N0Q2hhbmdlVXNlckF2YXRhcigKICAgICAgICAgIHsKICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgfSwKICAgICAgICAgIGZvcm1kYXRhCiAgICAgICAgKQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuabtOaUueWktOWDj+aIkOWKn34iLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgdGhhdC5zcmMgPSB0aGlzLnJlc3VsdDsKICAgICAgICAgICAgICBidXMuJGVtaXQoImNoYW5nZXVzZXJBdmF0YXIiLCB0aGlzLnJlc3VsdCk7CiAgICAgICAgICAgICAgYnVzLiRlbWl0KCJjaGFuZ2V1c2VyQXZhdGFyX2NoYXJ0IiwgdGhpcy5yZXN1bHQpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pu05pS55aS05YOP5aSx6LSlfuivt+mHjeivlSIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBQb3N0SW5pdFVzZXJBdmF0YXIoCiAgICAgICAgICB7CiAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgICAgIH0sCiAgICAgICAgICBmb3JtZGF0YQogICAgICAgICkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pu05pS55aS05YOP5oiQ5YqffiIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICB0aGF0LnNyYyA9IHRoaXMucmVzdWx0OwogICAgICAgICAgICB9OwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5pu05pS55aS05YOP5aSx6LSlfuivt+mHjeivlSIsCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8v5o+Q5Lqk5L+u5pS55L+h5oGvCiAgICBzdW1iaXQoKSB7CiAgICAgIGxldCBuaWNrbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuaWNrbmFtZSIpOwogICAgICBsZXQgZW1haWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZW1haWwiKTsKICAgICAgbGV0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBhc3N3b3JkIik7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhpcy4kY29uZmlybSgi56Gu6K6k5o+Q5Lqk5L+u5pS55L+h5oGv5ZCX77yfIiwgIuaPkOekuiIsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8v5Y+R6YCBYXhpb3Pmj5DkuqQKICAgICAgICAgIFBvc3RDaGFuZ2VNZXNzYWdlQVBJKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbmlja25hbWU6IG5pY2tuYW1lLnZhbHVlLAogICAgICAgICAgICAgIGVtYWlsOiBlbWFpbC52YWx1ZSwKICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQudmFsdWUsCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqffiIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkv67mlLnlpLHotKXvvIHor7fph43or5UiLAogICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygi5Y+W5raIIik7CiAgICAgICAgfSk7CiAgICB9LAogICAgcXVlcnlTZWFyY2hBc3luYyhxdWVyeVN0cmluZywgY2IpIHsKICAgICAgdmFyIHJlc3RhdXJhbnRzID0gdGhpcy5yZXN0YXVyYW50czsKICAgICAgdmFyIHJlc3VsdHMgPSBxdWVyeVN0cmluZwogICAgICAgID8gcmVzdGF1cmFudHMuZmlsdGVyKHRoaXMuY3JlYXRlU3RhdGVGaWx0ZXIocXVlcnlTdHJpbmcpKQogICAgICAgIDogcmVzdGF1cmFudHM7CgogICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTsKICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgY2IocmVzdWx0cyk7CiAgICAgIH0sIDIwMDAgKiBNYXRoLnJhbmRvbSgpKTsKICAgIH0sCiAgICBjcmVhdGVTdGF0ZUZpbHRlcihxdWVyeVN0cmluZykgewogICAgICByZXR1cm4gKHN0YXRlKSA9PiB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHN0YXRlLnZhbHVlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxdWVyeVN0cmluZy50b0xvd2VyQ2FzZSgpKSA9PT0gMAogICAgICAgICk7CiAgICAgIH07CiAgICB9LAogICAgaGFuZGxlU2VsZWN0KGl0ZW0pIHsKICAgICAgdGhpcy5saXN0ID0gdGhpcy5hbGxsaXN0OwogICAgICB0aGlzLmxpc3QgPSBbdGhpcy5saXN0W2l0ZW0ubnVtXV07CiAgICB9LAoKICAgIC8v5pi+56S66YGu572p5bGCCiAgICBzaG93KHZhbCkgewogICAgICBsZXQgaW1nYWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic3RvcmFnZV9pbWciKTsKICAgICAgbGV0IHBhbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzdG9yYWdlX3AiKTsKICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gdmFsOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltZ2FsbC5sZW5ndGg7IGkrKykgewogICAgICAgIGltZ2FsbFtpXS5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKTsKICAgICAgICBwYWxsW2ldLmNsYXNzTGlzdC5hZGQoImFjdGl2ZV9wIik7CiAgICAgICAgdGhpcy5hbGxsaXN0ID0gW107CiAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgIC8vYXhpb3Por7fmsYLlhajpg6jmlofku7bmlbDmja4KICAgICAgICBHZXRBbGxGaWxlQVBJKHsKICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgICB9KQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB0aGF0LmFsbGxpc3QucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogcmVzLmRhdGEuZGF0YVtpXS51c2VySWQsCiAgICAgICAgICAgICAgICBQYXRoOiByZXMuZGF0YS5kYXRhW2ldLmZpbGVSZW1vdGVQYXRoLAogICAgICAgICAgICAgICAgU2l6ZTogcmVzLmRhdGEuZGF0YVtpXS5maWxlU2l6ZSwKICAgICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLmRhdGFbaV0uZmlsZU9yaWdpbk5hbWUsCiAgICAgICAgICAgICAgICBncm91cE5hbWU6IHJlcy5kYXRhLmRhdGFbaV0uZ3JvdXBOYW1lLAogICAgICAgICAgICAgICAgLy9pZHR5cGU6CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5hbGxsaXN0OwogICAgICAgIC8vIHRoaXMuanVkZ2VUeXBlKCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFsbGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHRoaXMucmVzdGF1cmFudHNbaV0udmFsdWUgPSB0aGlzLmFsbGxpc3RbaV0ubmFtZTsKICAgICAgICAgIHRoaXMucmVzdGF1cmFudHNbaV0ubnVtID0gdGhpcy5hbGxsaXN0W2ldLmk7CiAgICAgICAgICAvLyB0aGlzLnJlc3RhdXJhbnRzLnB1c2goeyB2YWx1ZTogdGhpcy5hbGxsaXN0W2ldLm5hbWUsIG51bTogaSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvL+WFs+mXremBrue9qeWxggogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgbGV0IGltZ2FsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInN0b3JhZ2VfaW1nIik7CiAgICAgIGxldCBwYWxsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic3RvcmFnZV9wIik7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1nYWxsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaW1nYWxsW2ldLmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpOwogICAgICAgIHBhbGxbaV0uY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlX3AiKTsKICAgICAgfQogICAgfSwKICAgIC8v5YWz6Zet5oq95bGJ57uE5Lu2CiAgICBoYW5kbGVDbG9zZShkb25lKSB7CiAgICAgIGRvbmUoKTsKICAgIH0sCgogICAgLy/miZPlvIDmir3lsYnnu4Tku7YKICAgIHR1cm50b3BhZ2UoKSB7CiAgICAgIHRoaXMuZHJhd2VyID0gdHJ1ZTsKICAgICAgLy/ot7PovazliLDmlofku7bliJfooagKICAgICAgdGhpcy5pc1Nob3dGaWxlTGlzdCA9IHRydWU7CiAgICAgIHRoaXMuaXNTaG93TG9hZFVwID0gZmFsc2U7CiAgICAgIHRoaXMuaXNTaG93UGVhcnNvbmFsID0gZmFsc2U7CiAgICAgIHRoaXMuYWxsbGlzdCA9IFtdOwogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIEdldEFsbEZpbGVBUEkoewogICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMuZGF0YS5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoYXQuYWxsbGlzdC5wdXNoKHsKICAgICAgICAgICAgICBpZDogcmVzLmRhdGEuZGF0YVtpXS51c2VySWQsCiAgICAgICAgICAgICAgUGF0aDogcmVzLmRhdGEuZGF0YVtpXS5maWxlUmVtb3RlUGF0aCwKICAgICAgICAgICAgICBpZHR5cGU6ICJpbWdJZCIsCiAgICAgICAgICAgICAgU2l6ZTogcmVzLmRhdGEuZGF0YVtpXS5maWxlU2l6ZSwKICAgICAgICAgICAgICBuYW1lOiByZXMuZGF0YS5kYXRhW2ldLmZpbGVPcmlnaW5OYW1lLAogICAgICAgICAgICAgIGdyb3VwTmFtZTogcmVzLmRhdGEuZGF0YVtpXS5ncm91cE5hbWUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhhdC5qdWRnZVR5cGUoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgICB0aGlzLmxpc3QgPSB0aGlzLmFsbGxpc3Q7CiAgICAgIHRoaXMuanVkZ2VUeXBlKCk7CiAgICAgIHRoaXMucmVzdGF1cmFudHMgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLnJlc3RhdXJhbnRzLnB1c2goeyB2YWx1ZTogdGhpcy5saXN0W2ldLm5hbWUsIG51bTogaSB9KTsKICAgICAgfQogICAgfSwKCiAgICAvL+aUueWPmOminOiJsgogICAgdHVybmNvbG9yKGluZGV4KSB7CiAgICAgIGxldCBhbGxsaSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImxpYnRuIik7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWxsbGkubGVuZ3RoOyBpKyspIHsKICAgICAgICBhbGxsaVtpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAidHJhbnNwYXJlbnQiOwogICAgICAgIGFsbGxpW2ldLnN0eWxlLmNvbG9yID0gIiMwMDAiOwogICAgICB9CiAgICAgIGFsbGxpW2luZGV4XS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAiIzQ2YTNmZiI7CiAgICAgIGFsbGxpW2luZGV4XS5zdHlsZS5jb2xvciA9ICIjZmZmIjsKICAgIH0sCiAgICAvL+WIpOaWreaWh+S7tuexu+WeiwogICAganVkZ2VUeXBlKCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLmxpc3RbaV0uaWR0eXBlID09ICJpbWdJZCIpIHsKICAgICAgICAgIHRoaXMubGlzdFtpXS51cmwgPSByZXF1aXJlKCIuLi9pbWcvUGhvdG9fZm9ybWF0LnBuZyIpOwogICAgICAgICAgdGhpcy5saXN0W2ldLnRpdGxlID0gIuWbvueJhyI7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmxpc3RbaV0uaWR0eXBlID09ICJtdXNpY0lkIikgewogICAgICAgICAgdGhpcy5saXN0W2ldLnVybCA9IHJlcXVpcmUoIi4uL2ltZy9NdXNpY19mb3JtYXQucG5nIik7CiAgICAgICAgICB0aGlzLmxpc3RbaV0udGl0bGUgPSAi6Z+z5LmQIjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubGlzdFtpXS5pZHR5cGUgPT0gImRvY3VtZW50SWQiKSB7CiAgICAgICAgICB0aGlzLmxpc3RbaV0udXJsID0gcmVxdWlyZSgiLi4vaW1nL0ZpbGVfZm9ybWF0LnBuZyIpOwogICAgICAgICAgdGhpcy5saXN0W2ldLnRpdGxlID0gIuaWh+S7tiI7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmxpc3RbaV0uaWR0eXBlID09ICJ2aWRlb0lkIikgewogICAgICAgICAgdGhpcy5saXN0W2ldLnVybCA9IHJlcXVpcmUoIi4uL2ltZy9WaWRlb19mb3JtYXQucG5nIik7CiAgICAgICAgICB0aGlzLmxpc3RbaV0udGl0bGUgPSAi6KeG6aKRIjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzaG93YWxsKGluZGV4KSB7CiAgICAgIC8vIGF4aW9z6K+35rGC5YWo6YOo5pWw5o2uCiAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICBsZXQgdGhhdCA9IHRoaXM7CgogICAgICBHZXRBbGxGaWxlQVBJKHsKICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGEuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB0aGF0Lmxpc3QucHVzaCh7CiAgICAgICAgICAgICAgaWQ6IHJlcy5kYXRhLmRhdGFbaV0udXNlcklkLAogICAgICAgICAgICAgIFBhdGg6IHJlcy5kYXRhLmRhdGFbaV0uZmlsZVJlbW90ZVBhdGgsCiAgICAgICAgICAgICAgaWR0eXBlOiAiaW1nSWQiLAogICAgICAgICAgICAgIFNpemU6IHJlcy5kYXRhLmRhdGFbaV0uZmlsZVNpemUsCiAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEuZGF0YVtpXS5maWxlT3JpZ2luTmFtZSwKICAgICAgICAgICAgICBncm91cE5hbWU6IHJlcy5kYXRhLmRhdGFbaV0uZ3JvdXBOYW1lLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoYXQuanVkZ2VUeXBlKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgdGhpcy5qdWRnZVR5cGUoKTsKICAgICAgdGhpcy50dXJuY29sb3IoaW5kZXgpOwogICAgfSwKICAgIHNob3dwaG90byhpbmRleCkgewogICAgICAvL2F4aW9z6K+35rGC5omA5pyJ5Zu+54mHCiAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIEdldEFsbEltZ0FQSSh7CiAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhhdC5saXN0LnB1c2goewogICAgICAgICAgICAgIGlkOiByZXMuZGF0YS5kYXRhW2ldLmltZ0lkLAogICAgICAgICAgICAgIFBhdGg6IHJlcy5kYXRhLmRhdGFbaV0uaW1nUmVtb3RlUGF0aCwKICAgICAgICAgICAgICBpZHR5cGU6ICJpbWdJZCIsCiAgICAgICAgICAgICAgU2l6ZTogcmVzLmRhdGEuZGF0YVtpXS5pbWdTaXplLAogICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLmRhdGFbaV0uaW1nT3JpZ2luTmFtZSwKICAgICAgICAgICAgICBncm91cE5hbWU6IHJlcy5kYXRhLmRhdGFbaV0uZ3JvdXBOYW1lLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoYXQuanVkZ2VUeXBlKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgdGhpcy50dXJuY29sb3IoaW5kZXgpOwogICAgfSwKCiAgICBzaG93dmlkZW8oaW5kZXgpIHsKICAgICAgLy9heGlvc+ivt+axguaJgOacieinhumikQogICAgICBsZXQgdGhhdCA9IHRoaXM7CgogICAgICBHZXRBbGxWaWRlb0FQSSh7CiAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhhdC5saXN0LnB1c2goewogICAgICAgICAgICAgIGlkOiByZXMuZGF0YS5kYXRhW2ldLnZpZGVvSWQsCiAgICAgICAgICAgICAgUGF0aDogcmVzLmRhdGEuZGF0YVtpXS52aWRlby52aWRlb1JlbW90ZVBhdGgsCiAgICAgICAgICAgICAgaWR0eXBlOiAidmlkZW9JZCIsCiAgICAgICAgICAgICAgU2l6ZTogcmVzLmRhdGEuZGF0YVtpXS52aWRlby52aWRlb1NpemUsCiAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEuZGF0YVtpXS52aWRlb09yaWdpbk5hbWUsCiAgICAgICAgICAgICAgZ3JvdXBOYW1lOiByZXMuZGF0YS5kYXRhW2ldLmdyb3VwTmFtZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGF0Lmp1ZGdlVHlwZSgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICAgIHRoaXMuanVkZ2VUeXBlKCk7CiAgICAgIHRoaXMudHVybmNvbG9yKGluZGV4KTsKICAgIH0sCiAgICBzaG93bXVzaWMoaW5kZXgpIHsKICAgICAgdGhpcy5saXN0ID0gW107CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgLy9heGlvc+ivt+axguaJgOaciemfs+S5kAogICAgICBHZXRBbGxNdXNpY0FQSSh7CiAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5kYXRhLmRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhhdC5saXN0LnB1c2goewogICAgICAgICAgICAgIGlkOiByZXMuZGF0YS5kYXRhW2ldLm11c2ljSWQsCiAgICAgICAgICAgICAgUGF0aDogcmVzLmRhdGEuZGF0YVtpXS5tdXNpY1JlbW90ZVBhdGgsCiAgICAgICAgICAgICAgaWR0eXBlOiAibXVzaWNJZCIsCiAgICAgICAgICAgICAgU2l6ZTogcmVzLmRhdGEuZGF0YVtpXS5tdXNpY1NpemUsCiAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEuZGF0YVtpXS5tdXNpY09yaWdpbk5hbWUsCiAgICAgICAgICAgICAgZ3JvdXBOYW1lOiByZXMuZGF0YS5kYXRhW2ldLmdyb3VwTmFtZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGF0Lmp1ZGdlVHlwZSgpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgfSk7CiAgICAgIHRoaXMuanVkZ2VUeXBlKCk7CiAgICAgIHRoaXMudHVybmNvbG9yKGluZGV4KTsKICAgIH0sCiAgICBzaG93ZmlsZShpbmRleCkgewogICAgICAvL2F4aW9z6K+35rGC5omA5pyJ5paH5qGj5paH5Lu2CiAgICAgIHRoaXMubGlzdCA9IFsKICAgICAgICB7CiAgICAgICAgICBpZDogMSwKICAgICAgICAgIFBhdGg6IHJlcXVpcmUoIi4uL2ltZy9ibHVlaW1nLmpwZyIpLAogICAgICAgICAgaWR0eXBlOiAiZG9jdW1lbnRJZCIsCiAgICAgICAgICBuYW1lOiAibGl1LmRvY3giLAogICAgICAgIH0sCiAgICAgIF07CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgR2V0QWxsRG9jdW1lbnRBUEkoewogICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXMuZGF0YS5kYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoYXQubGlzdC5wdXNoKHsKICAgICAgICAgICAgICBpZDogcmVzLmRhdGEuZGF0YVtpXS5kb2N1bWVudElkLAogICAgICAgICAgICAgIFBhdGg6IHJlcy5kYXRhLmRhdGFbaV0uZG9jdW1lbnRSZW1vdGVQYXRoLAogICAgICAgICAgICAgIGlkdHlwZTogImRvY3VtZW50SWQiLAogICAgICAgICAgICAgIFNpemU6IHJlcy5kYXRhLmRhdGFbaV0uZG9jdW1lbnRTaXplLAogICAgICAgICAgICAgIG5hbWU6IHJlcy5kYXRhLmRhdGFbaV0uZG9jdW1lbnRPcmlnaW5OYW1lLAogICAgICAgICAgICAgIGdyb3VwTmFtZTogcmVzLmRhdGEuZGF0YVtpXS5ncm91cE5hbWUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhhdC5qdWRnZVR5cGUoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwogICAgICB0aGlzLmp1ZGdlVHlwZSgpOwogICAgICB0aGlzLnR1cm5jb2xvcihpbmRleCk7CiAgICB9LAogICAgLy/mn6XnnIvmlofku7YKICAgIGxvb2soaW5kZXgpIHsKICAgICAgaWYgKHRoaXMubGlzdFtpbmRleF0uaWR0eXBlID09ICJpbWdJZCIpIHsKICAgICAgICAvL+WbvueJh+exu+Wei++8jOiwg+eUqOWbvueJh+aYvuekuuWZqAogICAgICAgIGJ1cy4kZW1pdCgiSW1nUmVzb3VyY2VzIiwgdGhpcy5saXN0W2luZGV4XSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgicGhvdG9kaXYiKVswXS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgfQogICAgICBpZiAodGhpcy5saXN0W2luZGV4XS5pZHR5cGUgPT0gIm11c2ljSWQiKSB7CiAgICAgICAgLy/pn7PkuZDnsbvlnovvvIzosIPnlKjpn7PkuZDmkq3mlL7lmagKICAgICAgICBidXMuJGVtaXQoInJlc291cmNlcyIsIHRoaXMubGlzdFtpbmRleF0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImF1ZGlvZGl2IilbMF0uc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic21hbGxhdWRpb2RpdiIpWzBdLnN0eWxlLmRpc3BsYXkgPQogICAgICAgICAgIm5vbmUiOwogICAgICB9CiAgICAgIGlmICh0aGlzLmxpc3RbaW5kZXhdLmlkdHlwZSA9PSAiZG9jdW1lbnRJZCIpIHsKICAgICAgICAvL+aWh+S7tuexu+Wei++8jOiwg+eUqOaWh+S7tuaYvuekuuWZqAogICAgICAgIGNvbnNvbGUubG9nKCJmaWxlIik7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubGlzdFtpbmRleF0uaWR0eXBlID09ICJ2aWRlb0lkIikgewogICAgICAgIC8v6KeG6aKR57G75Z6L77yM6LCD55So6KeG6aKR5pKt5pS+5ZmoCiAgICAgICAgYnVzLiRlbWl0KCJWaWRlb1Jlc291cmNlcyIsIHRoaXMubGlzdFtpbmRleF0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInZpZGVvZGl2IilbMF0uc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgIH0KICAgIH0sCiAgICAvLyDkuIvovb3mlofku7YKICAgIGxvYWQoaW5kZXgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGlzLiRjb25maXJtKCLnoa7orqTkuIvovb0iICsgdGhpcy5saXN0W2luZGV4XS5uYW1lICsgIuWQl++8nyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBjb25zdCBsb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgICAgIGxvY2s6IHRydWUsCiAgICAgICAgICAgIHRleHQ6ICJMb2FkaW5nIiwKICAgICAgICAgICAgc3Bpbm5lcjogImVsLWljb24tbG9hZGluZyIsCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDAsIDAsIDAsIDAuNykiLAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodGhpcy5saXN0W2luZGV4XS5pZHR5cGUgPT0gImltZ0lkIikgewogICAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICB1cmw6CiAgICAgICAgICAgICAgICAiaHR0cHM6Ly93d3cubmV0ZGlzYy5jbG91ZC9pbWcvZG93bmxvYWQvIiArIHRoaXMubGlzdFtpbmRleF0uaWQsCiAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAiYmxvYiIsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBsZXQgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgdGhhdC5hZGROb2RlKFt1cmwsIGluZGV4XSk7CiAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5LiL6L295oiQ5Yqf77yBIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxpc3RbaW5kZXhdLmlkdHlwZSA9PSAibXVzaWNJZCIpIHsKICAgICAgICAgICAgYXhpb3MoewogICAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgICAgdXJsOgogICAgICAgICAgICAgICAgImh0dHBzOi8vd3d3Lm5ldGRpc2MuY2xvdWQvbXVzaWMvZG93bmxvYWQvIiArCiAgICAgICAgICAgICAgICB0aGlzLmxpc3RbaW5kZXhdLmlkLAogICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogImJsb2IiLAogICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgbGV0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgIHRoYXQuYWRkTm9kZShbdXJsLCBpbmRleF0pOwogICAgICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuS4i+i9veaIkOWKn++8gSIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5saXN0W2luZGV4XS5pZHR5cGUgPT0gInZpZGVvSWQiKSB7CiAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICAgIHVybDoKICAgICAgICAgICAgICAgICJodHRwczovL3d3dy5uZXRkaXNjLmNsb3VkL3ZpZGVvL2Rvd25sb2FkLyIgKwogICAgICAgICAgICAgICAgdGhpcy5saXN0W2luZGV4XS5pZCwKICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICJibG9iIiwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChyZXMuZGF0YSk7CiAgICAgICAgICAgICAgICB0aGF0LmFkZE5vZGUoW3VybCwgaW5kZXhdKTsKICAgICAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkuIvovb3miJDlip/vvIEiLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgICB1cmw6CiAgICAgICAgICAgICAgICAiaHR0cHM6Ly93d3cubmV0ZGlzYy5jbG91ZC9kb2N1bWVudC9kb3dubG9hZC8iICsKICAgICAgICAgICAgICAgIHRoaXMubGlzdFtpbmRleF0uaWQsCiAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAiYmxvYiIsCiAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBsZXQgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwocmVzLmRhdGEpOwogICAgICAgICAgICAgICAgdGhhdC5hZGROb2RlKFt1cmwsIGluZGV4XSk7CiAgICAgICAgICAgICAgICBsb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5LiL6L295oiQ5Yqf77yBIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCLlj5bmtojkuIvovb3vvIEiKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBhZGROb2RlKFtkYXRhLCBpbmRleF0pIHsKICAgICAgbGV0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7IC8v5Yib5bu6Yeagh+etvgogICAgICBsaW5rLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IC8v5L2/5YW26ZqQ6JePCiAgICAgIGxpbmsuaHJlZiA9IGRhdGE7IC8v6LWL5LqI5paH5Lu25LiL6L295Zyw5Z2ACiAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIHRoaXMubGlzdFtpbmRleF0ubmFtZSk7IC8v6K6+572u5LiL6L295bGe5oCnIOS7peWPiuaWh+S7tuWQjQogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOyAvL2HmoIfnrb7mj5Loh7PpobXpnaLkuK0KICAgICAgbGluay5jbGljaygpOyAvL+W8uuWItuinpuWPkWHmoIfnrb7kuovku7YKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIH0sCiAgICAvL+WIh+aNoumhtemdogogICAgc2hvd2ZpbGVsaXN0KCkgewogICAgICB0aGlzLmlzU2hvd0ZpbGVMaXN0ID0gdHJ1ZTsKICAgICAgdGhpcy5pc1Nob3dMb2FkVXAgPSBmYWxzZTsKICAgICAgdGhpcy5pc1Nob3dQZWFyc29uYWwgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93YWxsKDApOwogICAgfSwKICAgIHNob3dsb2FkdXAoKSB7CiAgICAgIHRoaXMuaXNTaG93RmlsZUxpc3QgPSBmYWxzZTsKICAgICAgdGhpcy5pc1Nob3dMb2FkVXAgPSB0cnVlOwogICAgICB0aGlzLmlzU2hvd1BlYXJzb25hbCA9IGZhbHNlOwogICAgfSwKICAgIHNob3dwZXJzb25hbCgpIHsKICAgICAgdGhpcy5pc1Nob3dGaWxlTGlzdCA9IGZhbHNlOwogICAgICB0aGlzLmlzU2hvd0xvYWRVcCA9IGZhbHNlOwogICAgICB0aGlzLmlzU2hvd1BlYXJzb25hbCA9IHRydWU7CiAgICB9LAogICAgY29udHJvbHBlcnNvbmFsKGFsbCkgewogICAgICB0aGlzLmRyYXdlciA9IHRydWU7CiAgICAgIHRoaXMuc3JjID0gYWxsWzBdOwogICAgICB0aGlzLm5pY2tuYW1lID0gYWxsWzFdOwogICAgICB0aGlzLmVtYWlsID0gYWxsWzJdOwogICAgICB0aGlzLnBhc3N3b3JkID0gYWxsWzNdOwogICAgICB0aGlzLmlzU2hvd0ZpbGVMaXN0ID0gZmFsc2U7CiAgICAgIHRoaXMuaXNTaG93TG9hZFVwID0gZmFsc2U7CiAgICAgIHRoaXMuaXNTaG93UGVhcnNvbmFsID0gdHJ1ZTsKICAgIH0sCiAgICBwZWFyc29uYWxtZXNzYWdlKGFsbCkgewogICAgICB0aGlzLnNyYyA9IGFsbC51c2VybmFtZTsKICAgICAgdGhpcy5uaWNrbmFtZSA9IGFsbC5hY2NvdW50OwogICAgICB0aGlzLmVtYWlsID0gYWxsLmVtYWlsOwogICAgICB0aGlzLnNyYyA9ICJodHRwczovL3d3dy5uZXRkaXNjLmNsb3VkLyIgKyBhbGwuYXZhdGFyVXJsOwogICAgfSwKICAgIC8v5LiK5Lyg5paH5Lu25ZCO5aSE55CG5Ye95pWwCiAgICBoYW5kbGVGaWxlVXBsb2FkKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGlmIChldmVudC50YXJnZXQuaWQgPT0gImltZ2lkIikgewogICAgICAgIGxldCBpbWdpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpbWdpZCIpOwogICAgICAgIGlmIChpbWdpZC5maWxlcy5sZW5ndGggPiAwICYmIGltZ2lkLmZpbGVzLmxlbmd0aCA8IDYpIHsKICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKCiAgICAgICAgICBpZiAoaW1naWQuZmlsZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgLy/ljZXlvKDlm77niYcKICAgICAgICAgICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgiaW1nIiwgaW1naWQuZmlsZXNbMF0pOwogICAgICAgICAgICBQb3N0U2luZ2xlSW1nQVBJKAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZvcm1kYXRhCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgdGhhdC5hZGRsb2FkaXRlbShpbWdpZC5maWxlcyk7CiAgICAgICAgICAgICAgICB0aGF0LmxvYWRzdWNjZXNzKHRydWUpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5LiK5Lyg5aSx6LSl77yBIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy/lpJrlvKDlm77niYcKICAgICAgICAgICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1naWQuZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoImltZ3MiLCBpbWdpZC5maWxlc1tpXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFBvc3RNdWx0aUltZ0FQSSgKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBmb3JtZGF0YQogICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIHRoYXQuYWRkbG9hZGl0ZW0oaW1naWQuZmlsZXMpOwogICAgICAgICAgICAgICAgdGhhdC5sb2Fkc3VjY2Vzcyh0cnVlKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuS4iuS8oOWksei0pe+8gSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuacgOWkmuWPquiDveS4iuS8oDXlvKDlm77niYfvvIHor7fph43mlrDpgInmi6kiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5pZCA9PSAiZG9jdW1lbnRpZCIpIHsKICAgICAgICBsZXQgZG9jdW1lbnRpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkb2N1bWVudGlkIik7CiAgICAgICAgaWYgKGRvY3VtZW50aWQuZmlsZXMubGVuZ3RoID4gMCAmJiBkb2N1bWVudGlkLmZpbGVzLmxlbmd0aCA8IDYpIHsKICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgIGlmIChkb2N1bWVudGlkLmZpbGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgIC8v5Y2V5Liq5paH5qGjCiAgICAgICAgICAgIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoImRvY3VtZW50IiwgZG9jdW1lbnRpZC5maWxlc1swXSk7CiAgICAgICAgICAgIFBvc3RTaW1nbGVEb2N1bWVudEFQSSgKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBmb3JtZGF0YQogICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIHRoYXQuYWRkbG9hZGl0ZW0oZG9jdW1lbnRpZC5maWxlcyk7CiAgICAgICAgICAgICAgICB0aGF0LmxvYWRzdWNjZXNzKHRydWUpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkuIrkvKDlpLHotKXvvIEiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudGlkLmZpbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCJkb2N1bWVudHMiLCBkb2N1bWVudGlkLmZpbGVzW2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBQb3N0TXVsdGlEb2N1bWVudEFQSSgKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0b2tlbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIiksCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBmb3JtZGF0YQogICAgICAgICAgICApCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIHRoYXQuYWRkbG9hZGl0ZW0oZG9jdW1lbnRpZC5maWxlcyk7CiAgICAgICAgICAgICAgICB0aGF0LmxvYWRzdWNjZXNzKHRydWUpOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLkuIrkvKDlpLHotKXvvIEiLAogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmnIDlpJrlj6rog73kuIrkvKA15p2h5paH5Lu277yB6K+36YeN5paw6YCJ5oupIiwKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuaWQgPT0gIm11c2ljaWQiKSB7CiAgICAgICAgbGV0IG11c2ljaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXVzaWNpZCIpOwogICAgICAgIGlmIChtdXNpY2lkLmZpbGVzLmxlbmd0aCA+IDAgJiYgbXVzaWNpZC5maWxlcy5sZW5ndGggPCA2KSB7CiAgICAgICAgICAvL+WPkemAgeS4iuS8oOmfs+S5kOivt+axggogICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgaWYgKG11c2ljaWQuZmlsZXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgLy/ljZXkuKrpn7PkuZAKICAgICAgICAgICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgibXVzaWMiLCBtdXNpY2lkLmZpbGVzWzBdKTsKICAgICAgICAgICAgUG9zdFNpbmdsZU11c2ljQVBJKAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZvcm1kYXRhCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgdGhhdC5hZGRsb2FkaXRlbShtdXNpY2lkLmZpbGVzKTsKICAgICAgICAgICAgICAgIHRoYXQubG9hZHN1Y2Nlc3ModHJ1ZSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuS4iuS8oOWksei0pe+8gSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG11c2ljaWQuZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoIm11c2ljcyIsIG11c2ljaWQuZmlsZXNbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFBvc3RNdWx0aU11c2ljQVBJKAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGZvcm1kYXRhCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAgICAgdGhhdC5hZGRsb2FkaXRlbShtdXNpY2lkLmZpbGVzKTsKICAgICAgICAgICAgICAgIHRoYXQubG9hZHN1Y2Nlc3ModHJ1ZSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIuS4iuS8oOWksei0pe+8gSIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuacgOWkmuWPquiDveS4iuS8oDXpppbpn7PkuZDvvIHor7fph43mlrDpgInmi6kiLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGV2ZW50LnRhcmdldC5pZCA9PSAidmlkZW9pZCIpIHsKICAgICAgICBsZXQgdmlkZW9pZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aWRlb2lkIik7CiAgICAgICAgaWYgKHZpZGVvaWQuZmlsZXMubGVuZ3RoID4gMCAmJiB2aWRlb2lkLmZpbGVzLmxlbmd0aCA8IDYpIHsKICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgIGlmICh2aWRlb2lkLmZpbGVzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgIGxldCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoKICAgICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCJ2aWRlbyIsIHZpZGVvaWQuZmlsZXNbMF0pOwogICAgICAgICAgICBQb3N0U2luZ2xlVmlkZW9BUEkoCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZm9ybWRhdGEKICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICB0aGF0LmFkZGxvYWRpdGVtKHZpZGVvaWQuZmlsZXMpOwogICAgICAgICAgICAgICAgdGhhdC5sb2Fkc3VjY2Vzcyh0cnVlKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5LiK5Lyg5aSx6LSlIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmlkZW9pZC5maWxlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgidmlkZW9zIiwgdmlkZW9pZC5maWxlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgUG9zdE11bHRpVmlkZW9BUEkoCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZm9ybWRhdGEKICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICB0aGF0LmFkZGxvYWRpdGVtKHZpZGVvaWQuZmlsZXMpOwogICAgICAgICAgICAgICAgdGhhdC5sb2Fkc3VjY2Vzcyh0cnVlKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5LiK5Lyg5aSx6LSlIiwKICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi5pyA5aSa5Y+q6IO95LiK5LygM+adoeinhumike+8geivt+mHjeaWsOmAieaLqSIsCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvL+i9rOaNomJhc2U2NOagvOW8jwogICAgY2hhbmdlQmFzZTY0KGRhdGEpIHsKICAgICAgdGhpcy5CYXNlNjQgPSBbXTsKCiAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChkYXRhKTsKICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHsKICAgICAgICB0aGlzLkJhc2U2NC5wdXNoKHJlYWRlci5yZXN1bHQpOwogICAgICB9OwogICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIiwgZXJyb3IpOwogICAgICB9OwogICAgfSwKICAgIC8v5re75Yqg5LiK5Lyg57uE5Lu2CiAgICBhZGRsb2FkaXRlbShkYXRhKSB7CiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZGF0YS5sZW5ndGg7IGorKykgewogICAgICAgIC8v5re75Yqg5LiK5Lyg6L+b5bqm5p2h57uE5Lu2CiAgICAgICAgbGV0IG5hbWUgPSBkYXRhW2pdLm5hbWU7CiAgICAgICAgbGV0IG51bWJlciA9IGRhdGFbal0uc2l6ZTsKICAgICAgICBudW1iZXIgPSB0aGlzLmNoYW5nZXVuaXQobnVtYmVyKTsKICAgICAgICB0aGlzLmZpbGVzbGlzdC5wdXNoKHsgbmFtZTogbmFtZSwgc2l6ZTogbnVtYmVyIH0pOwogICAgICB9CiAgICB9LAogICAgLy/kuIrkvKDmiJDlip8KICAgIGxvYWRzdWNjZXNzKHN1Y2Nlc3MpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBsZXQgbG9hZGl0ZW1hbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJsb2FkaXRlbSIpOwogICAgICBpZiAoc3VjY2VzcykgewogICAgICAgIGxldCB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoYXQucGVyY2VudGFnZSArPSAxMDsKICAgICAgICAgIGlmICh0aGF0LnBlcmNlbnRhZ2UgPT0gMTAwKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9hZGl0ZW1hbGwubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBsb2FkaXRlbWFsbFtpXS5jbGFzc0xpc3QuYWRkKCJsb2FkYWN0aXZlIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7CiAgICAgICAgICB9CiAgICAgICAgfSwgNTAwKTsKICAgICAgICBsZXQgdGltZXIyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhhdC4kbWVzc2FnZSh7CiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuS4iuS8oOaIkOWKn34iLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG9mZnNldDogMTUwLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGF0LnBlcmNlbnRhZ2UgPSAwOwogICAgICAgICAgdGhhdC5maWxlc2xpc3QgPSBbXTsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIyKTsKICAgICAgICB9LCA2MDAwKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvYWRpdGVtYWxsLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBsb2FkaXRlbWFsbFtpXS5jbGFzc0xpc3QucmVtb3ZlKCJsb2FkYWN0aXZlIik7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy/mlofku7blpKflsI9zaXpl6L2s5o2i5Y2V5L2NCiAgICBjaGFuZ2V1bml0KG51bWJlcikgewogICAgICBpZiAobnVtYmVyIDwgMTAyNCkgewogICAgICAgIHJldHVybiBudW1iZXIgKyAiYnl0ZXMiOwogICAgICB9IGVsc2UgaWYgKG51bWJlciA+IDEwMjQgJiYgbnVtYmVyIDwgMTA0ODU3NikgewogICAgICAgIHJldHVybiAobnVtYmVyIC8gMTAyNCkudG9GaXhlZCgxKSArICJLQiI7CiAgICAgIH0gZWxzZSBpZiAobnVtYmVyID4gMTA0ODU3NikgewogICAgICAgIHJldHVybiAobnVtYmVyIC8gMTA0ODU3NikudG9GaXhlZCgxKSArICJNQiI7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Storage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Storage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"storage\" :style=\"style\" id=\"storage\">\n      <img\n        src=\"../img/fileshow.png\"\n        alt=\"\"\n        class=\"storage_img\"\n        @click=\"turntopage\"\n      />\n      <img\n        src=\"../img/musicshow.png\"\n        alt=\"\"\n        class=\"storage_img\"\n        @click=\"turntopage\"\n      />\n      <img\n        src=\"../img/imgshow.png\"\n        alt=\"\"\n        class=\"storage_img\"\n        @click=\"turntopage\"\n      />\n      <img\n        src=\"../img/videoshow.png\"\n        alt=\"\"\n        class=\"storage_img\"\n        @click=\"turntopage\"\n      />\n      <img src=\"../img/close.png\" alt=\"\" class=\"close\" @click=\"close\" />\n      <p class=\"storage_p\">flie</p>\n      <p class=\"storage_p\">music</p>\n      <p class=\"storage_p\">photo</p>\n      <p class=\"storage_p\">video</p>\n    </div>\n    <el-drawer\n      :visible.sync=\"drawer\"\n      :direction=\"direction\"\n      size=\"100%\"\n      modal:false\n      :before-close=\"handleClose\"\n    >\n      <Video class=\"videodiv\"></Video>\n      <Audio class=\"audiodiv\"></Audio>\n      <Photo class=\"photodiv\"></Photo>\n      <Smallaudio class=\"smallaudiodiv\"></Smallaudio>\n      <div class=\"center\">\n        <div class=\"head\">\n          <div class=\"filelist\" @click=\"showfilelist\">文件列表</div>\n          <div class=\"loadup\" @click=\"showloadup\">上传</div>\n          <div class=\"personal\" @click=\"showpersonal\">\n            <div class=\"block\">\n              <el-avatar :size=\"50\" :src=\"circleUrl\"></el-avatar>\n            </div>\n            <div class=\"triangle\"></div>\n          </div>\n        </div>\n\n        <div class=\"centerpage\">\n          <!-- 文件列表 -->\n          <div class=\"FileList\" v-show=\"isShowFileList\">\n            <div class=\"leftbox\">\n              <ul id=\"ulbox\">\n                <li class=\"allfile libtn\" @click=\"showall(0)\">\n                  <a>全部文件</a>\n                </li>\n                <li class=\"libtn\" @click=\"showphoto(1)\"><a>图片</a></li>\n                <li class=\"libtn\" @click=\"showvideo(2)\"><a>视频</a></li>\n                <li class=\"libtn\" @click=\"showmusic(3)\"><a>音乐</a></li>\n                <li class=\"libtn\" @click=\"showfile(4)\"><a>文档</a></li>\n              </ul>\n            </div>\n            <!-- 搜索 -->\n            <el-autocomplete\n              v-model=\"state\"\n              class=\"search\"\n              :fetch-suggestions=\"querySearchAsync\"\n              placeholder=\"请输入内容\"\n              @select=\"handleSelect\"\n              :clearable=\"true\"\n            ></el-autocomplete>\n\n            <div class=\"viewFileList\">\n              <div class=\"item\" v-for=\"(i, index) in list\" :key=\"index + 1\">\n                <img :src=\"i.url\" alt=\"\" class=\"showcover\" :title=\"i.title\" />\n                <p class=\"showname\" :title=\"i.name\">{{ i.name }}</p>\n                <a class=\"download\" @click=\"load(index)\"><p>下载</p></a>\n                <a class=\"look\" @click=\"look(index)\"><p>查看</p></a>\n              </div>\n            </div>\n          </div>\n\n          <!-- 上传 -->\n\n          <div class=\"loadupall\" v-show=\"isShowLoadUp\">\n            <div class=\"LoadUp\">\n              <div>\n                <img src=\"../img/blueimg.jpg\" alt=\"\" />\n\n                <input\n                  type=\"file\"\n                  class=\"Field\"\n                  accept=\".jpg,.png\"\n                  name=\"photo\"\n                  multiple=\"5\"\n                  id=\"imgid\"\n                  v-on:change=\"handleFileUpload($event)\"\n                  title=\"最多上传图片5张\"\n                />\n\n                <p>上传图片</p>\n              </div>\n              <div>\n                <img src=\"../img/bluefile.jpg\" alt=\"\" />\n\n                <input\n                  type=\"file\"\n                  class=\"Field\"\n                  accept=\".docx,.txt,.pdf,.doc,.ppt,.pptx,.xls,.xlsx\"\n                  multiple=\"5\"\n                  id=\"documentid\"\n                  v-on:change=\"handleFileUpload($event)\"\n                  title=\"最多上传文件5条\"\n                />\n\n                <p>上传文件</p>\n              </div>\n              <div>\n                <img src=\"../img/bluemusic.jpg\" alt=\"\" />\n\n                <input\n                  type=\"file\"\n                  class=\"Field\"\n                  ref=\"file\"\n                  accept=\".mp3\"\n                  multiple=\"5\"\n                  id=\"musicid\"\n                  v-on:change=\"handleFileUpload($event)\"\n                  title=\"最多上传音乐5首\"\n                />\n\n                <p>上传音乐</p>\n              </div>\n              <div>\n                <img src=\"../img/bluevideo.jpg\" />\n\n                <input\n                  type=\"file\"\n                  class=\"Field\"\n                  alt=\"\"\n                  accept=\".mp4,.flv,.swf,.ogg,.webm\"\n                  multiple=\"3\"\n                  id=\"videoid\"\n                  v-on:change=\"handleFileUpload($event)\"\n                  title=\"最多上传视频3条\"\n                />\n\n                <p>上传视频</p>\n              </div>\n            </div>\n\n            <div class=\"filenameshow\">\n              <div\n                class=\"loaditem\"\n                v-for=\"(i, index) in fileslist\"\n                :key=\"index + 1\"\n              >\n                <div>\n                  <img src=\"../img/load.png\" alt=\"\" />\n                  <p>{{ i.name }}</p>\n                  <p>{{ i.size }}</p>\n                </div>\n                <div class=\"bottom\">\n                  <el-progress\n                    :percentage=\"percentage\"\n                    :color=\"customColor\"\n                  ></el-progress>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- 个人 -->\n          <div class=\"Personal\" v-show=\"isShowPearsonal\">\n            <div class=\"head_portrait\">\n              <img :src=\"src\" />\n              <div class=\"edit\">\n                <p>编辑</p>\n                <input\n                  type=\"file\"\n                  accept=\"image/gif,image/jpeg,image/png,image/jpg\"\n                  @change=\"update\"\n                />\n              </div>\n            </div>\n            <label class=\"nicknamelabel\">昵称:</label>\n            <input type=\"text\" id=\"nickname\" :value=\"nickname\" />\n            <label class=\"emaillabel\">邮箱:</label>\n            <input type=\"text\" id=\"email\" :value=\"email\" />\n            <label class=\"passwordlabel\">密码:</label>\n            <input type=\"password\" id=\"password\" :value=\"password\" />\n            <button class=\"sumbit\" @click=\"sumbit\">提交</button>\n          </div>\n        </div>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\nimport bus from \"../utils/bus\";\nimport Video from \"../views/Video.vue\";\nimport Audio from \"../views/Audio.vue\";\nimport Smallaudio from \"../views/Smallaudio.vue\";\nimport Photo from \"../views/Photo.vue\";\nimport {\n  //改变用户头像API\n  PostChangeUserAvatar,\n  //获取数据API\n  GetAllFileAPI,\n  GetAllImgAPI,\n  GetAllVideoAPI,\n  GetAllMusicAPI,\n  GetAllDocumentAPI,\n  //上传数据API\n  PostSingleImgAPI,\n  PostMultiImgAPI,\n  PostSimgleDocumentAPI,\n  PostMultiDocumentAPI,\n  PostSingleMusicAPI,\n  PostMultiMusicAPI,\n  PostSingleVideoAPI,\n  PostMultiVideoAPI,\n  PostChangeMessageAPI,\n  PostInitUserAvatar,\n} from \"../request/api.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"Storage\",\n  components: {\n    Video,\n    Audio,\n    Smallaudio,\n    Photo,\n  },\n  data() {\n    return {\n      style: {\n        display: \"none\",\n      },\n      //抽屉默认显示\n      drawer: false,\n      direction: \"rtl\",\n      //头像\n      circleUrl: require(\"../img/head.png\"),\n      sizeList: [\"large\"],\n\n      //上传，好友，文件列表切换显示\n      isShowFileList: false,\n      isShowLoadUp: false,\n      isShowPearsonal: false,\n      //上传列表\n      fileslist: [],\n      //进度条显示\n      percentage: 0,\n      customColor: \"#409eff\",\n      // 个人信息更改\n      src: \"\",\n      nickname: \"\",\n      email: \"\",\n      password: \"\",\n      //文件显示列表\n      list: [],\n      alllist: [],\n      //输入框配置\n      restaurants: [],\n      state: \"\",\n      timeout: null,\n      //token\n      token: \"\",\n      //文件转换成base64\n      Base64: [],\n    };\n  },\n  mounted() {\n    bus.$off(\"event\"); //阻止事件被触发多次\n    bus.$on(\"event\", this.show); //绑定\n    bus.$on(\"control\", this.controlpersonal); //绑定\n    bus.$off(\"pearsonalmessage\"); //阻止事件被触发多次\n    bus.$on(\"pearsonalmessage\", this.pearsonalmessage); //绑定\n  },\n\n  methods: {\n    //更换渲染头像\n    update(e) {\n      let file = e.target.files[0];\n      let formdata = new FormData();\n      formdata.append(\"header\", file);\n      let that = this;\n      console.log(file);\n      let avatarUrl = localStorage.getItem(\"avatarUrl\");\n      if (avatarUrl != null) {\n        PostChangeUserAvatar(\n          {\n            token: localStorage.getItem(\"token\"),\n          },\n          formdata\n        )\n          .then(function (res) {\n            console.log(res);\n            that.$message({\n              showClose: true,\n              message: \"更改头像成功~\",\n              type: \"success\",\n            });\n            let reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = function (e) {\n              that.src = this.result;\n              bus.$emit(\"changeuserAvatar\", this.result);\n              bus.$emit(\"changeuserAvatar_chart\", this.result);\n            };\n          })\n          .catch(function (err) {\n            that.$message({\n              showClose: true,\n              message: \"更改头像失败~请重试\",\n              type: \"error\",\n            });\n          });\n      } else {\n        PostInitUserAvatar(\n          {\n            token: localStorage.getItem(\"token\"),\n          },\n          formdata\n        )\n          .then(function (res) {\n            console.log(res);\n\n            that.$message({\n              showClose: true,\n              message: \"更改头像成功~\",\n              type: \"success\",\n            });\n            let reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = function (e) {\n              that.src = this.result;\n            };\n          })\n          .catch(function (err) {\n            that.$message({\n              showClose: true,\n              message: \"更改头像失败~请重试\",\n              type: \"error\",\n            });\n          });\n      }\n    },\n    //提交修改信息\n    sumbit() {\n      let nickname = document.getElementById(\"nickname\");\n      let email = document.getElementById(\"email\");\n      let password = document.getElementById(\"password\");\n      let that = this;\n      this.$confirm(\"确认提交修改信息吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          //发送axios提交\n          PostChangeMessageAPI(\n            {\n              token: localStorage.getItem(\"token\"),\n            },\n            {\n              nickname: nickname.value,\n              email: email.value,\n              password: password.value,\n            }\n          )\n            .then(function (res) {\n              console.log(res);\n              that.$message({\n                showClose: true,\n                message: \"修改成功~\",\n                type: \"success\",\n              });\n            })\n            .catch(function (err) {\n              console.log(err);\n              that.$message({\n                showClose: true,\n                message: \"修改失败！请重试\",\n                type: \"warning\",\n              });\n            });\n        })\n        .catch(() => {\n          console.log(\"取消\");\n        });\n    },\n    querySearchAsync(queryString, cb) {\n      var restaurants = this.restaurants;\n      var results = queryString\n        ? restaurants.filter(this.createStateFilter(queryString))\n        : restaurants;\n\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        cb(results);\n      }, 2000 * Math.random());\n    },\n    createStateFilter(queryString) {\n      return (state) => {\n        return (\n          state.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0\n        );\n      };\n    },\n    handleSelect(item) {\n      this.list = this.alllist;\n      this.list = [this.list[item.num]];\n    },\n\n    //显示遮罩层\n    show(val) {\n      let imgall = document.getElementsByClassName(\"storage_img\");\n      let pall = document.getElementsByClassName(\"storage_p\");\n      this.style.display = val;\n      for (let i = 0; i < imgall.length; i++) {\n        imgall[i].classList.add(\"active\");\n        pall[i].classList.add(\"active_p\");\n        this.alllist = [];\n        let that = this;\n        //axios请求全部文件数据\n        GetAllFileAPI({\n          token: localStorage.getItem(\"token\"),\n        })\n          .then(function (res) {\n            for (let i = 0; i < res.data.data.length; i++) {\n              that.alllist.push({\n                id: res.data.data[i].userId,\n                Path: res.data.data[i].fileRemotePath,\n                Size: res.data.data[i].fileSize,\n                name: res.data.data[i].fileOriginName,\n                groupName: res.data.data[i].groupName,\n                //idtype:\n              });\n            }\n          })\n          .catch(function (err) {\n            console.log(err);\n          });\n        this.list = this.alllist;\n        // this.judgeType();\n        for (let i = 0; i < this.alllist.length; i++) {\n          this.restaurants[i].value = this.alllist[i].name;\n          this.restaurants[i].num = this.alllist[i].i;\n          // this.restaurants.push({ value: this.alllist[i].name, num: i });\n        }\n      }\n    },\n    //关闭遮罩层\n    close() {\n      this.style.display = \"none\";\n      let imgall = document.getElementsByClassName(\"storage_img\");\n      let pall = document.getElementsByClassName(\"storage_p\");\n      for (let i = 0; i < imgall.length; i++) {\n        imgall[i].classList.remove(\"active\");\n        pall[i].classList.remove(\"active_p\");\n      }\n    },\n    //关闭抽屉组件\n    handleClose(done) {\n      done();\n    },\n\n    //打开抽屉组件\n    turntopage() {\n      this.drawer = true;\n      //跳转到文件列表\n      this.isShowFileList = true;\n      this.isShowLoadUp = false;\n      this.isShowPearsonal = false;\n      this.alllist = [];\n      let that = this;\n      GetAllFileAPI({\n        token: localStorage.getItem(\"token\"),\n      })\n        .then(function (res) {\n          console.log(res);\n          for (let i = 0; i < res.data.data.length; i++) {\n            that.alllist.push({\n              id: res.data.data[i].userId,\n              Path: res.data.data[i].fileRemotePath,\n              idtype: \"imgId\",\n              Size: res.data.data[i].fileSize,\n              name: res.data.data[i].fileOriginName,\n              groupName: res.data.data[i].groupName,\n            });\n          }\n          that.judgeType();\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.list = this.alllist;\n      this.judgeType();\n      this.restaurants = [];\n      for (let i = 0; i < this.list.length; i++) {\n        this.restaurants.push({ value: this.list[i].name, num: i });\n      }\n    },\n\n    //改变颜色\n    turncolor(index) {\n      let allli = document.getElementsByClassName(\"libtn\");\n      for (let i = 0; i < allli.length; i++) {\n        allli[i].style.backgroundColor = \"transparent\";\n        allli[i].style.color = \"#000\";\n      }\n      allli[index].style.backgroundColor = \"#46a3ff\";\n      allli[index].style.color = \"#fff\";\n    },\n    //判断文件类型\n    judgeType() {\n      for (let i = 0; i < this.list.length; i++) {\n        if (this.list[i].idtype == \"imgId\") {\n          this.list[i].url = require(\"../img/Photo_format.png\");\n          this.list[i].title = \"图片\";\n        }\n        if (this.list[i].idtype == \"musicId\") {\n          this.list[i].url = require(\"../img/Music_format.png\");\n          this.list[i].title = \"音乐\";\n        }\n        if (this.list[i].idtype == \"documentId\") {\n          this.list[i].url = require(\"../img/File_format.png\");\n          this.list[i].title = \"文件\";\n        }\n        if (this.list[i].idtype == \"videoId\") {\n          this.list[i].url = require(\"../img/Video_format.png\");\n          this.list[i].title = \"视频\";\n        }\n      }\n    },\n    showall(index) {\n      // axios请求全部数据\n      this.list = [];\n      let that = this;\n\n      GetAllFileAPI({\n        token: localStorage.getItem(\"token\"),\n      })\n        .then(function (res) {\n          console.log(res);\n          for (let i = 0; i < res.data.data.length; i++) {\n            that.list.push({\n              id: res.data.data[i].userId,\n              Path: res.data.data[i].fileRemotePath,\n              idtype: \"imgId\",\n              Size: res.data.data[i].fileSize,\n              name: res.data.data[i].fileOriginName,\n              groupName: res.data.data[i].groupName,\n            });\n          }\n          that.judgeType();\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.judgeType();\n      this.turncolor(index);\n    },\n    showphoto(index) {\n      //axios请求所有图片\n      this.list = [];\n      let that = this;\n      GetAllImgAPI({\n        token: localStorage.getItem(\"token\"),\n      })\n        .then(function (res) {\n          console.log(res);\n          for (let i = 0; i < res.data.data.length; i++) {\n            that.list.push({\n              id: res.data.data[i].imgId,\n              Path: res.data.data[i].imgRemotePath,\n              idtype: \"imgId\",\n              Size: res.data.data[i].imgSize,\n              name: res.data.data[i].imgOriginName,\n              groupName: res.data.data[i].groupName,\n            });\n          }\n          that.judgeType();\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.turncolor(index);\n    },\n\n    showvideo(index) {\n      //axios请求所有视频\n      let that = this;\n\n      GetAllVideoAPI({\n        token: localStorage.getItem(\"token\"),\n      })\n        .then(function (res) {\n          console.log(res);\n          for (let i = 0; i < res.data.data.length; i++) {\n            that.list.push({\n              id: res.data.data[i].videoId,\n              Path: res.data.data[i].video.videoRemotePath,\n              idtype: \"videoId\",\n              Size: res.data.data[i].video.videoSize,\n              name: res.data.data[i].videoOriginName,\n              groupName: res.data.data[i].groupName,\n            });\n          }\n          that.judgeType();\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.judgeType();\n      this.turncolor(index);\n    },\n    showmusic(index) {\n      this.list = [];\n      let that = this;\n      //axios请求所有音乐\n      GetAllMusicAPI({\n        token: localStorage.getItem(\"token\"),\n      })\n        .then(function (res) {\n          console.log(res);\n          for (let i = 0; i < res.data.data.length; i++) {\n            that.list.push({\n              id: res.data.data[i].musicId,\n              Path: res.data.data[i].musicRemotePath,\n              idtype: \"musicId\",\n              Size: res.data.data[i].musicSize,\n              name: res.data.data[i].musicOriginName,\n              groupName: res.data.data[i].groupName,\n            });\n          }\n          that.judgeType();\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.judgeType();\n      this.turncolor(index);\n    },\n    showfile(index) {\n      //axios请求所有文档文件\n      this.list = [\n        {\n          id: 1,\n          Path: require(\"../img/blueimg.jpg\"),\n          idtype: \"documentId\",\n          name: \"liu.docx\",\n        },\n      ];\n      let that = this;\n      GetAllDocumentAPI({\n        token: localStorage.getItem(\"token\"),\n      })\n        .then(function (res) {\n          console.log(res);\n          for (let i = 0; i < res.data.data.length; i++) {\n            that.list.push({\n              id: res.data.data[i].documentId,\n              Path: res.data.data[i].documentRemotePath,\n              idtype: \"documentId\",\n              Size: res.data.data[i].documentSize,\n              name: res.data.data[i].documentOriginName,\n              groupName: res.data.data[i].groupName,\n            });\n          }\n          that.judgeType();\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n      this.judgeType();\n      this.turncolor(index);\n    },\n    //查看文件\n    look(index) {\n      if (this.list[index].idtype == \"imgId\") {\n        //图片类型，调用图片显示器\n        bus.$emit(\"ImgResources\", this.list[index]);\n        document.getElementsByClassName(\"photodiv\")[0].style.display = \"block\";\n      }\n      if (this.list[index].idtype == \"musicId\") {\n        //音乐类型，调用音乐播放器\n        bus.$emit(\"resources\", this.list[index]);\n        document.getElementsByClassName(\"audiodiv\")[0].style.display = \"block\";\n        document.getElementsByClassName(\"smallaudiodiv\")[0].style.display =\n          \"none\";\n      }\n      if (this.list[index].idtype == \"documentId\") {\n        //文件类型，调用文件显示器\n        console.log(\"file\");\n      }\n      if (this.list[index].idtype == \"videoId\") {\n        //视频类型，调用视频播放器\n        bus.$emit(\"VideoResources\", this.list[index]);\n        document.getElementsByClassName(\"videodiv\")[0].style.display = \"block\";\n      }\n    },\n    // 下载文件\n    load(index) {\n      let that = this;\n      this.$confirm(\"确认下载\" + this.list[index].name + \"吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          const loading = this.$loading({\n            lock: true,\n            text: \"Loading\",\n            spinner: \"el-icon-loading\",\n            background: \"rgba(0, 0, 0, 0.7)\",\n          });\n          if (this.list[index].idtype == \"imgId\") {\n            axios({\n              method: \"get\",\n              url:\n                \"https://www.netdisc.cloud/img/download/\" + this.list[index].id,\n              responseType: \"blob\",\n              params: {\n                token: localStorage.getItem(\"token\"),\n              },\n            })\n              .then(function (res) {\n                let url = window.URL.createObjectURL(res.data);\n                that.addNode([url, index]);\n                loading.close();\n                that.$message({\n                  type: \"success\",\n                  message: \"下载成功！\",\n                });\n              })\n              .catch(function (error) {\n                console.log(error);\n              });\n          } else if (this.list[index].idtype == \"musicId\") {\n            axios({\n              method: \"get\",\n              url:\n                \"https://www.netdisc.cloud/music/download/\" +\n                this.list[index].id,\n              responseType: \"blob\",\n              params: {\n                token: localStorage.getItem(\"token\"),\n              },\n            })\n              .then(function (res) {\n                let url = window.URL.createObjectURL(res.data);\n                that.addNode([url, index]);\n                loading.close();\n                that.$message({\n                  type: \"success\",\n                  message: \"下载成功！\",\n                });\n              })\n              .catch(function (error) {\n                console.log(error);\n              });\n          } else if (this.list[index].idtype == \"videoId\") {\n            axios({\n              method: \"get\",\n              url:\n                \"https://www.netdisc.cloud/video/download/\" +\n                this.list[index].id,\n              responseType: \"blob\",\n              params: {\n                token: localStorage.getItem(\"token\"),\n              },\n            })\n              .then(function (res) {\n                let url = window.URL.createObjectURL(res.data);\n                that.addNode([url, index]);\n                loading.close();\n                that.$message({\n                  type: \"success\",\n                  message: \"下载成功！\",\n                });\n              })\n              .catch(function (error) {\n                console.log(error);\n              });\n          } else {\n            axios({\n              method: \"get\",\n              url:\n                \"https://www.netdisc.cloud/document/download/\" +\n                this.list[index].id,\n              responseType: \"blob\",\n              params: {\n                token: localStorage.getItem(\"token\"),\n              },\n            })\n              .then(function (res) {\n                let url = window.URL.createObjectURL(res.data);\n                that.addNode([url, index]);\n                loading.close();\n                that.$message({\n                  type: \"success\",\n                  message: \"下载成功！\",\n                });\n              })\n              .catch(function (error) {\n                console.log(error);\n              });\n          }\n        })\n        .catch(() => {\n          console.log(\"取消下载！\");\n        });\n    },\n    addNode([data, index]) {\n      let link = document.createElement(\"a\"); //创建a标签\n      link.style.display = \"none\"; //使其隐藏\n      link.href = data; //赋予文件下载地址\n      link.setAttribute(\"download\", this.list[index].name); //设置下载属性 以及文件名\n      document.body.appendChild(link); //a标签插至页面中\n      link.click(); //强制触发a标签事件\n      document.body.removeChild(link);\n    },\n    //切换页面\n    showfilelist() {\n      this.isShowFileList = true;\n      this.isShowLoadUp = false;\n      this.isShowPearsonal = false;\n      this.showall(0);\n    },\n    showloadup() {\n      this.isShowFileList = false;\n      this.isShowLoadUp = true;\n      this.isShowPearsonal = false;\n    },\n    showpersonal() {\n      this.isShowFileList = false;\n      this.isShowLoadUp = false;\n      this.isShowPearsonal = true;\n    },\n    controlpersonal(all) {\n      this.drawer = true;\n      this.src = all[0];\n      this.nickname = all[1];\n      this.email = all[2];\n      this.password = all[3];\n      this.isShowFileList = false;\n      this.isShowLoadUp = false;\n      this.isShowPearsonal = true;\n    },\n    pearsonalmessage(all) {\n      this.src = all.username;\n      this.nickname = all.account;\n      this.email = all.email;\n      this.src = \"https://www.netdisc.cloud/\" + all.avatarUrl;\n    },\n    //上传文件后处理函数\n    handleFileUpload(event) {\n      event.preventDefault();\n      if (event.target.id == \"imgid\") {\n        let imgid = document.getElementById(\"imgid\");\n        if (imgid.files.length > 0 && imgid.files.length < 6) {\n          let that = this;\n\n          if (imgid.files.length == 1) {\n            //单张图片\n            let formdata = new FormData();\n            formdata.append(\"img\", imgid.files[0]);\n            PostSingleImgAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(imgid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                console.log(err);\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败！\",\n                  type: \"error\",\n                });\n              });\n          } else {\n            //多张图片\n            let formdata = new FormData();\n            for (let i = 0; i < imgid.files.length; i++) {\n              formdata.append(\"imgs\", imgid.files[i]);\n            }\n\n            PostMultiImgAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(imgid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                console.log(err);\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败！\",\n                  type: \"error\",\n                });\n              });\n          }\n        } else {\n          this.$message({\n            showClose: true,\n            message: \"最多只能上传5张图片！请重新选择\",\n            type: \"error\",\n          });\n        }\n      } else if (event.target.id == \"documentid\") {\n        let documentid = document.getElementById(\"documentid\");\n        if (documentid.files.length > 0 && documentid.files.length < 6) {\n          let that = this;\n          if (documentid.files.length == 1) {\n            //单个文档\n            let formdata = new FormData();\n            formdata.append(\"document\", documentid.files[0]);\n            PostSimgleDocumentAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(documentid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败！\",\n                  type: \"error\",\n                });\n              });\n          } else {\n            let formdata = new FormData();\n            for (let i = 0; i < documentid.files.length; i++) {\n              formdata.append(\"documents\", documentid.files[i]);\n            }\n            PostMultiDocumentAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(documentid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败！\",\n                  type: \"error\",\n                });\n              });\n          }\n        } else {\n          this.$message({\n            showClose: true,\n            message: \"最多只能上传5条文件！请重新选择\",\n            type: \"error\",\n          });\n        }\n      } else if (event.target.id == \"musicid\") {\n        let musicid = document.getElementById(\"musicid\");\n        if (musicid.files.length > 0 && musicid.files.length < 6) {\n          //发送上传音乐请求\n          let that = this;\n          if (musicid.files.length == 1) {\n            //单个音乐\n            let formdata = new FormData();\n            formdata.append(\"music\", musicid.files[0]);\n            PostSingleMusicAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(musicid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败！\",\n                  type: \"error\",\n                });\n              });\n          } else {\n            let formdata = new FormData();\n            for (let i = 0; i < musicid.files.length; i++) {\n              formdata.append(\"musics\", musicid.files[i]);\n            }\n            PostMultiMusicAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(musicid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败！\",\n                  type: \"error\",\n                });\n              });\n          }\n        } else {\n          this.$message({\n            showClose: true,\n            message: \"最多只能上传5首音乐！请重新选择\",\n            type: \"error\",\n          });\n        }\n      } else if (event.target.id == \"videoid\") {\n        let videoid = document.getElementById(\"videoid\");\n        if (videoid.files.length > 0 && videoid.files.length < 6) {\n          let that = this;\n          if (videoid.files.length == 1) {\n            let formdata = new FormData();\n\n            formdata.append(\"video\", videoid.files[0]);\n            PostSingleVideoAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(videoid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败\",\n                  type: \"error\",\n                });\n              });\n          } else {\n            let formdata = new FormData();\n            for (let i = 0; i < videoid.files.length; i++) {\n              formdata.append(\"videos\", videoid.files[i]);\n            }\n            PostMultiVideoAPI(\n              {\n                token: localStorage.getItem(\"token\"),\n              },\n              formdata\n            )\n              .then(function (res) {\n                console.log(res);\n                that.addloaditem(videoid.files);\n                that.loadsuccess(true);\n              })\n              .catch(function (err) {\n                that.$message({\n                  showClose: true,\n                  message: \"上传失败\",\n                  type: \"error\",\n                });\n              });\n          }\n        } else {\n          this.$message({\n            showClose: true,\n            message: \"最多只能上传3条视频！请重新选择\",\n            type: \"error\",\n          });\n        }\n      }\n    },\n    //转换base64格式\n    changeBase64(data) {\n      this.Base64 = [];\n\n      let reader = new FileReader();\n      reader.readAsDataURL(data);\n      reader.onload = () => {\n        this.Base64.push(reader.result);\n      };\n      reader.onerror = function (error) {\n        console.log(\"Error: \", error);\n      };\n    },\n    //添加上传组件\n    addloaditem(data) {\n      for (let j = 0; j < data.length; j++) {\n        //添加上传进度条组件\n        let name = data[j].name;\n        let number = data[j].size;\n        number = this.changeunit(number);\n        this.fileslist.push({ name: name, size: number });\n      }\n    },\n    //上传成功\n    loadsuccess(success) {\n      let that = this;\n      let loaditemall = document.getElementsByClassName(\"loaditem\");\n      if (success) {\n        let timer = setInterval(function () {\n          that.percentage += 10;\n          if (that.percentage == 100) {\n            for (let i = 0; i < loaditemall.length; i++) {\n              loaditemall[i].classList.add(\"loadactive\");\n            }\n            clearInterval(timer);\n          }\n        }, 500);\n        let timer2 = setInterval(function () {\n          that.$message({\n            showClose: true,\n            message: \"上传成功~\",\n            type: \"success\",\n            offset: 150,\n          });\n          that.percentage = 0;\n          that.fileslist = [];\n          clearInterval(timer2);\n        }, 6000);\n        for (let i = 0; i < loaditemall.length; i++) {\n          loaditemall[i].classList.remove(\"loadactive\");\n        }\n      }\n    },\n    //文件大小size转换单位\n    changeunit(number) {\n      if (number < 1024) {\n        return number + \"bytes\";\n      } else if (number > 1024 && number < 1048576) {\n        return (number / 1024).toFixed(1) + \"KB\";\n      } else if (number > 1048576) {\n        return (number / 1048576).toFixed(1) + \"MB\";\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.storage {\n  position: fixed;\n  z-index: 99;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  backdrop-filter: blur(10px);\n  background-color: rgba(0, 0, 0, 0.6);\n}\n\n.storage .storage_img {\n  position: absolute;\n  width: 15%;\n  top: -20%;\n  cursor: pointer;\n}\n.storage .storage_p {\n  position: absolute;\n  color: #fff;\n  width: 15%;\n  font-size: xx-large;\n  bottom: 20%;\n  text-align: center;\n}\n.active {\n  animation: move 2s infinite;\n  -webkit-animation: move 2s infinite; /*Safari and Chrome*/\n  animation-iteration-count: 1;\n  -webkit-animation-iteration-count: 1; /*Safari and Chrome*/\n  animation-fill-mode: forwards;\n}\n.active_p {\n  animation: move_p 2s infinite;\n  -webkit-animation: move_p 2s infinite; /*Safari and Chrome*/\n  animation-iteration-count: 1;\n  -webkit-animation-iteration-count: 1; /*Safari and Chrome*/\n  animation-fill-mode: forwards;\n}\n\n@keyframes move {\n  from {\n    top: -20%;\n  }\n  to {\n    top: 35%;\n  }\n}\n\n@-webkit-keyframes move /*Safari and Chrome*/ {\n  from {\n    top: -20%;\n  }\n  to {\n    top: 35%;\n  }\n}\n@keyframes move_p {\n  from {\n    bottom: -20%;\n  }\n  to {\n    bottom: 25%;\n  }\n}\n\n@-webkit-keyframes move_p /*Safari and Chrome*/ {\n  from {\n    bottom: -20%;\n  }\n  to {\n    bottom: 25%;\n  }\n}\n\n.storage img:nth-child(1),\n.storage p:nth-child(6) {\n  left: 8%;\n}\n.storage img:nth-child(2),\n.storage p:nth-child(7) {\n  left: 31%;\n}\n.storage img:nth-child(3),\n.storage p:nth-child(8) {\n  left: 54%;\n}\n.storage img:nth-child(4),\n.storage p:nth-child(9) {\n  left: 77%;\n}\n\n.storage .close {\n  position: absolute;\n  height: 6%;\n  top: 5%;\n  right: 5%;\n  cursor: pointer;\n}\n.center {\n  position: absolute;\n  height: 98%;\n  width: 96%;\n  left: 1%;\n  top: 2%;\n  background-color: #fff;\n  box-shadow: #000 0px 0px 50px;\n  border-radius: 2rem;\n}\n.head {\n  position: absolute;\n  height: 12%;\n  width: 100%;\n  border-bottom: 1px solid#E0E0E0;\n}\n.head div {\n  position: absolute;\n  color: #fff;\n  cursor: pointer;\n}\n.head .filelist {\n  width: 8%;\n  left: 68%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  border: 10px solid #46a3ff;\n  background-color: #46a3ff;\n  border-radius: 2rem;\n}\n.head .loadup {\n  width: 8%;\n  left: 80%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  border: 10px solid #46a3ff;\n  background-color: #46a3ff;\n  border-radius: 2rem;\n}\n.head .personal {\n  position: absolute;\n  color: #fff;\n  cursor: pointer;\n  right: 0%;\n  width: 10%;\n  height: 100%;\n  border-left: 3px solid #e0e0e0;\n}\n.head .personal .block {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.head .personal .triangle {\n  position: absolute;\n  top: 40%;\n  left: 70%;\n  height: 20%;\n  width: 20%;\n  background: url(\"../img/triangle.png\");\n  background-size: 80%;\n  background-position: center;\n  background-repeat: no-repeat;\n}\n.head .personal:hover .triangle {\n  animation: Tmove 1s infinite;\n  -webkit-animation: Tmove 1s infinite; /*Safari and Chrome*/\n  animation-iteration-count: 1;\n  -webkit-animation-iteration-count: 1; /*Safari and Chrome*/\n  animation-fill-mode: forwards;\n}\n@keyframes Tmove {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(180deg);\n  }\n}\n\n@-webkit-keyframes Tmove /*Safari and Chrome*/ {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(180deg);\n  }\n}\n.leftbox {\n  position: absolute;\n  height: 100%;\n  width: 15%;\n  background-color: #e0e0e0;\n  border-bottom-left-radius: 2rem;\n}\n.leftbox ul {\n  padding: 0;\n  margin: 0;\n  position: absolute;\n  height: 70%;\n  width: 100%;\n}\n.leftbox ul .allfile {\n  border-bottom: 2px solid #e0e0e0;\n  background-color: #46a3ff;\n  color: #fff;\n}\n.leftbox ul li {\n  list-style: none;\n  position: relative;\n  height: 20%;\n  text-align: center;\n  cursor: pointer;\n}\n\n.leftbox ul li a {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.centerpage {\n  position: absolute;\n  height: 88%;\n  width: 100%;\n  top: 12%;\n}\n\n.FileList .search {\n  position: absolute;\n  left: 18%;\n  top: 15px;\n  height: 40px;\n  width: 40%;\n}\n.FileList .viewFileList {\n  position: absolute;\n  height: 90%;\n  width: 85%;\n  left: 15%;\n  bottom: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  overflow-y: scroll;\n  scrollbar-color: rgba(0, 0, 0, 0.2) rgba(0, 0, 0, 0.1);\n  scrollbar-width: thin;\n  -ms-overflow-style: none;\n}\n\n.FileList .viewFileList .item {\n  position: relative;\n  height: 200px;\n  width: 150px;\n  margin-top: 30px;\n  margin-left: 80px;\n  cursor: pointer;\n}\n.FileList .viewFileList .item:hover {\n  background-color: rgba(198, 240, 251, 0.4);\n}\n.FileList .viewFileList .item:hover .download,\n.FileList .viewFileList .item:hover .look {\n  visibility: visible;\n  background-color: #46a3ff;\n  height: 18%;\n  cursor: pointer;\n}\n.showcover {\n  position: absolute;\n  height: 40px;\n  width: 40px;\n  top: 40%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.showname {\n  position: absolute;\n  bottom: 25%;\n  left: 50%;\n  width: 100%;\n  height: auto;\n  transform: translate(-50%, 0);\n  margin: 0;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.download {\n  position: absolute;\n  width: 50%;\n  bottom: 0;\n  height: 0;\n  color: #fff;\n  transition: all 0.3s;\n  visibility: hidden;\n}\n.look {\n  position: absolute;\n  width: 50%;\n  right: 0;\n  bottom: 0;\n  height: 0;\n  color: #fff;\n  transition: all 0.3s;\n  visibility: hidden;\n}\n.download p,\n.look p {\n  margin: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.loadupall {\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n.LoadUp {\n  position: relative;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n}\n.LoadUp div {\n  position: relative;\n  margin-top: 150px;\n  height: 250px;\n  width: 200px;\n}\n\n.LoadUp div img {\n  position: absolute;\n  height: 200px;\n  width: 200px;\n}\n.LoadUp div p {\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  text-align: center;\n  color: #46a3ff;\n}\n.LoadUp div input {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  cursor: pointer;\n}\n.filenameshow {\n  position: absolute;\n  height: 40%;\n  width: 100%;\n  bottom: 0%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n.loaditem {\n  position: relative;\n  height: 60px;\n  width: 500px;\n  background-color: rgba(70, 163, 255, 0.4);\n  border-radius: 10px;\n  transition: all 0.5s;\n  margin-bottom: 10px;\n}\n.loadactive {\n  animation: load 1s infinite;\n  -webkit-animation: load 1s infinite; /*Safari and Chrome*/\n  animation-iteration-count: 1;\n  -webkit-animation-iteration-count: 1; /*Safari and Chrome*/\n  animation-fill-mode: forwards;\n}\n@keyframes load {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n    transform: translate(0, -50%);\n  }\n}\n.loaditem div {\n  position: absolute;\n  height: 50%;\n  width: 100%;\n}\n.loaditem div img {\n  position: absolute;\n  height: 100%;\n}\n.loaditem div p:nth-child(2) {\n  position: absolute;\n  height: 90%;\n  width: 70%;\n  bottom: 0;\n  left: 10%;\n  margin: 0;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.loaditem div p:nth-child(3) {\n  position: absolute;\n  height: 80%;\n  text-align: center;\n  bottom: 0;\n  font-size: x-small;\n  right: 5%;\n  margin: 0;\n}\n.bottom {\n  bottom: 0;\n}\n.videodiv,\n.audiodiv,\n.photodiv {\n  position: absolute;\n  z-index: 300;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.4);\n  top: 0;\n  display: none;\n}\n\n.smallaudiodiv {\n  position: absolute;\n  height: 8%;\n  cursor: pointer;\n  width: 10%;\n  z-index: 300;\n  background-color: rgba(0, 0, 0, 0.4);\n  border-radius: 50px;\n  display: none;\n  bottom: 0;\n  right: 0;\n}\n.Personal {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.head_portrait {\n  position: absolute;\n  height: 180px;\n  width: 180px;\n  overflow: hidden;\n  border-radius: 180px;\n  top: 20%;\n  left: 50%;\n  border: 0.5px solid #000;\n  transform: translate(-50%, -50%);\n}\n.head_portrait:hover .edit {\n  visibility: visible;\n}\n.head_portrait img {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n.edit {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  visibility: hidden;\n}\n.edit p {\n  position: absolute;\n  font-size: xx-large;\n  top: 40%;\n  left: 50%;\n  color: #fff;\n  transform: translate(-50%, -50%);\n}\n.edit input {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  cursor: pointer;\n  opacity: 0;\n}\n.nicknamelabel,\n.emaillabel,\n.passwordlabel,\n#nickname,\n#email,\n#password {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  font-size: 20px;\n}\n.nicknamelabel {\n  top: 45%;\n  left: 32%;\n}\n.emaillabel {\n  top: 60%;\n  left: 32%;\n}\n.passwordlabel {\n  top: 75%;\n  left: 32%;\n}\n#nickname,\n#email,\n#password {\n  height: 6%;\n  width: 35%;\n  left: 52%;\n  border: 0;\n  border-bottom: 2px solid #000;\n  outline: none;\n  text-align: center;\n}\n\n#nickname {\n  top: 45%;\n}\n#email {\n  top: 60%;\n}\n#password {\n  top: 75%;\n}\n.sumbit {\n  position: absolute;\n  height: 8%;\n  width: 15%;\n  top: 85%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: 0;\n  border-radius: 30px;\n  cursor: pointer;\n  color: #fff;\n  background-color: #46a3ff;\n}\n.sumbit:hover {\n  background-color: darkblue;\n}\n.addbluecolor {\n  background-color: #46a3ff;\n  color: #fff;\n}\n</style>"]}]}